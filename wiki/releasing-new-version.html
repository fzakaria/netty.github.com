<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Netty.docs: Releasing new version</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="../images/favicon.ico" rel="shortcut icon">
    <link href="http://feeds.feedburner.com/netty_project" rel="alternate" title="News Feed" type="application/rss+xml">
    <style>
      body {
        padding-top: 60px;
      }
    </style>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css">
    <script src="../lib/sh/scripts/shCore.js" type="text/javascript"></script>
    <script src="../lib/sh/scripts/shBrushXml.js" type="text/javascript"></script>
    <link href="../lib/sh/styles/shCore.css" rel="stylesheet" type="text/css">
    <link href="../lib/sh/styles/shThemeDefault.css" rel="stylesheet" type="text/css">
    <link href="../lib/common.css" rel="stylesheet" type="text/css">
    <script src="../lib/common.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js" type="text/javascript"></script>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>
    <a class="sr-only" href="#content" id="top">Skip navigation</a>
    <nav class="navbar navbar-default navbar-fixed-top hidden-print" id="header" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">
            <span class="navbar-brand-logo"></span>
            Netty project
          </a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="../news/2014/07/01/4.html">
                News
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="../news/index.html">
                    <i class="fa fa-archive"></i>
                    Archive
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="../downloads.html">
                Downloads
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="http://dl.bintray.com/netty/downloads/netty-5.0.0.Alpha1.tar.bz2">
                    <i class="fa fa-cloud-download"></i>
                    5.0.0.Alpha1
                    <small>&dash; 22-Dec-2013</small>
                  </a>
                </li>
                <li>
                  <a href="http://dl.bintray.com/netty/downloads/netty-4.0.21.Final.tar.bz2">
                    <i class="fa fa-cloud-download"></i>
                    4.0.21.Final
                    <small>&dash; 01-Jul-2014</small>
                  </a>
                </li>
                <li>
                  <a href="http://dl.bintray.com/netty/downloads/netty-3.9.2.Final-dist.tar.bz2">
                    <i class="fa fa-cloud-download"></i>
                    3.9.2.Final
                    <small>&dash; 11-Jun-2014</small>
                  </a>
                </li>
                <li>
                  <a href="http://www.tldrlegal.com/l/APACHE2">
                    <i class="fa fa-gavel"></i>
                    Apache License 2.0
                  </a>
                </li>
                <li>
                  <a href="https://bintray.com/netty/downloads/netty/">
                    <i class="fa fa-archive"></i>
                    Previous Releases
                  </a>
                </li>
                <li>
                  <a href="https://secure.motd.kr/jenkins/view/Netty/">
                    <i class="fa fa-flask"></i>
                    Nightly Builds
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="../wiki/index.html">
                Documentation
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="../wiki/user-guide.html">
                    <i class="fa fa-book"></i>
                    User guide
                  </a>
                </li>
                <li>
                  <a href="../5.0/api/index.html">
                    <i class="fa fa-file-text"></i>
                    Javadoc - 5.0
                  </a>
                </li>
                <li>
                  <a href="../4.0/api/index.html">
                    <i class="fa fa-file-text"></i>
                    Javadoc - 4.0
                  </a>
                </li>
                <li>
                  <a href="../3.9/api/index.html">
                    <i class="fa fa-file-text"></i>
                    Javadoc - 3.9
                  </a>
                </li>
                <li>
                  <a href="../wiki/all-documents.html">
                    <i class="fa fa-list"></i>
                    All Documents
                  </a>
                </li>
                <li>
                  <a href="../wiki/related-articles.html">
                    <i class="fa fa-bookmark"></i>
                    Related Articles
                  </a>
                </li>
                <li>
                  <a href="../wiki/related-projects.html">
                    <i class="fa fa-bookmark"></i>
                    Related Projects
                  </a>
                </li>
                <li class="hidden-xs" id="bookpromo-dropdown">
                  <a href="http://www.manning.com/maurer/">
                    <img src="../images/netty-in-action.gif">
                    <br>
                    <small>
                      Use code <strong>mlnettyco</strong>
                      <br>
                      for a 37% discount!
                    </small>
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="../community.html">
                Get Involved
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="https://github.com/netty/netty">
                    <i class="fa fa-github-square"></i>
                    Github
                  </a>
                </li>
                <li>
                  <a href="http://stackoverflow.com/questions/tagged/netty">
                    <i class="fa fa-stack-overflow"></i>
                    StackOverflow
                  </a>
                </li>
                <li>
                  <a href="https://twitter.com/netty_project">
                    <i class="fa fa-twitter-square"></i>
                    @netty_project
                  </a>
                </li>
                <li>
                  <a href="../wiki/developer-guide.html">
                    <i class="fa fa-cogs"></i>
                    Developer Guide
                  </a>
                </li>
                <li>
                  <a href="http://webchat.freenode.net/?channels=%23netty&amp;uio=MT1mYWxzZSY5PXRydWU13">
                    <i class="fa fa-comment"></i>
                    IRC Chat
                  </a>
                </li>
              </ul>
            </li>
            <li class="visible-xs" id="bookpromo-nav">
              <a href="http://www.manning.com/maurer/">
                <img src="../images/netty-in-action.gif">
                <br>
                <small>
                  Use code <strong>mlnettyco</strong>
                  <br>
                  for a 37% discount!
                </small>
              </a>
            </li>
            <li>
              <a href="http://feeds.feedburner.com/netty_project">
                <i class="fa fa-rss"></i>
              </a>
            </li>
          </ul>
          <form action="../search.html" class="navbar-form navbar-right hidden-sm" method="GET" onsubmit="return validateGlobalSearchQuery()" role="search">
            <div class="form-group">
              <input class="search-query form-control" id="global-search-query" name="q" placeholder="Search" type="text">
            </div>
          </form>
        </div>
      </div>
    </nav>
    <div id="content">
      <div class="container">
        <div class="wiki-item">
          <h1>Releasing new version</h1>
          <div class="alert alert-info">
            Did you know this page is automatically generated from
            <a href="https://github.com/netty/netty/wiki/Releasing-new-version">a Github Wiki page?</a>
            You can improve it by yourself
            <a href="https://github.com/netty/netty/wiki/Releasing-new-version">here!</a>
          </div>
          <div class="row">
          <div class="col-md-9">
          <div id="wiki-body" class="gollum-markdown-content instapaper_body">
              <div class="markdown-body">
                <h2 id="wiki-h2-1">
          <a name="user-content-before-getting-started" class="anchor" href="#before-getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Before getting started</h2>
          
          <ul class="task-list">
          <li><a href="http://central.sonatype.org/pages/ossrh-guide.html">Read the OSSRH guide from Sonatype.</a></li>
          <li><a href="https://docs.sonatype.org/display/Repository/How+To+Generate+PGP+Signatures+With+Maven">Create a GnuPG key to sign the artifacts.</a></li>
          <li>
          <p>Configure your <code>~/.m2/settings.xml</code> contains the following configuration:</p>
          
          <div class="highlight highlight-xml"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>&#x000A;<span class="nt">&lt;settings&gt;</span>&#x000A;  <span class="nt">&lt;servers&gt;</span>&#x000A;    <span class="nt">&lt;server&gt;</span>&#x000A;      <span class="nt">&lt;id&gt;</span>sonatype-nexus-snapshots<span class="nt">&lt;/id&gt;</span>&#x000A;      <span class="nt">&lt;username&gt;</span>myusername<span class="nt">&lt;/username&gt;</span>&#x000A;      <span class="nt">&lt;password&gt;</span>mypassword<span class="nt">&lt;/password&gt;</span>&#x000A;    <span class="nt">&lt;/server&gt;</span>&#x000A;    <span class="nt">&lt;server&gt;</span>&#x000A;      <span class="nt">&lt;id&gt;</span>sonatype-nexus-staging<span class="nt">&lt;/id&gt;</span>&#x000A;      <span class="nt">&lt;username&gt;</span>myusername<span class="nt">&lt;/username&gt;</span>&#x000A;      <span class="nt">&lt;password&gt;</span>mypassword<span class="nt">&lt;/password&gt;</span>&#x000A;      <span class="nt">&lt;configuration&gt;</span>&#x000A;        <span class="nt">&lt;httpHeaders&gt;</span>&#x000A;          <span class="c">&lt;!--</span>&#x000A;<span class="c">            Override User-Agent header which is used when deploying an artifact</span>&#x000A;<span class="c">            so that Sonatype Nexus does not create multiple staging repositories</span>&#x000A;<span class="c">            when artifacts are deployed from different platforms (e.g. Linux and OSX).</span>&#x000A;<span class="c">          --&gt;</span>&#x000A;          <span class="nt">&lt;property&gt;</span>&#x000A;            <span class="nt">&lt;name&gt;</span>User-Agent<span class="nt">&lt;/name&gt;</span>&#x000A;            <span class="nt">&lt;value&gt;</span>Apache-Maven<span class="nt">&lt;/value&gt;</span>&#x000A;          <span class="nt">&lt;/property&gt;</span>&#x000A;        <span class="nt">&lt;/httpHeaders&gt;</span>&#x000A;      <span class="nt">&lt;/configuration&gt;</span>&#x000A;    <span class="nt">&lt;/server&gt;</span>&#x000A;  <span class="nt">&lt;/servers&gt;</span>&#x000A;  ...&#x000A;<span class="nt">&lt;/settings&gt;</span></pre></div>
          </li>
          </ul>
          <h2 id="wiki-h2-2">
          <a name="user-content-standard-maven-release-procedure" class="anchor" href="#standard-maven-release-procedure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Standard Maven release procedure</h2>
          
          <p>You must be familiar with the standard Maven release procedure, which uses <a href="http://maven.apache.org/maven-release/maven-release-plugin/">maven-release-plugin</a>:</p>
          
          <ol class="task-list">
          <li>
          <a href="https://docs.sonatype.org/display/Repository/Stage+a+Release">Stage the new release</a> into the staging repository.</li>
          <li>Verify the staged files are all good.  If not, <a href="https://docs.sonatype.org/display/Repository/Dropping+a+Staging+Repository">drop the staging repository</a> and try again.</li>
          <li>
          <a href="https://docs.sonatype.org/display/Repository/Closing+a+Staging+Repository">Close the staging repository</a> so that no more modifications are made into the staging repository.</li>
          <li>
          <a href="https://docs.sonatype.org/display/Repository/Releasing+a+Staging+Repository">Release the staging repository</a> so that the new release is synchronized into the Maven central repository.</li>
          </ol>
          <h2 id="wiki-h2-3">
          <a name="user-content-netty-3" class="anchor" href="#netty-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Netty 3</h2>
          
          <p>Following the standard Maven release procedure should be enough.</p>
          
          <h2 id="wiki-h2-4">
          <a name="user-content-netty-4-and-beyond" class="anchor" href="#netty-4-and-beyond" aria-hidden="true"><span class="octicon octicon-link"></span></a>Netty 4 and beyond</h2>
          
          <p>The release procedure must be performed from 64-bit <a href="http://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux_derivatives">RHEL 6.5 or its derivatives</a> so that we can easily ensure the ABI compatibility of the native libraries we ship.</p>
          
          <h2 id="wiki-h2-5">
          <a name="user-content-nettytomcatnative" class="anchor" href="#nettytomcatnative" aria-hidden="true"><span class="octicon octicon-link"></span></a><a class="internal present" href="forked-tomcat-native.html">Netty/TomcatNative</a>
          </h2>
          
          <p>Because we ship both Linux and Mac OS X artifacts, the release procedure is even more complicated.</p>
          
          <ol class="task-list">
          <li>Perform a release from 64-bit <a href="http://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux_derivatives">RHEL 6.5 or its derivatives</a> like you did for Netty 4.  However, do not close the staging repository just yet.</li>
          <li>
          <p>On your Mac OS X and 64-bit Windows, whose build environment is set up as documented <a class="internal present" href="forked-tomcat-native.html">here</a>, run the following commands to deploy the release artifacts to the staging repository:</p>
          
          <pre><code>$ git checkout netty-tcnative-[version]&#x000A;... You'll get a warning about detached HEAD ...&#x000A;$ mvn -Psonatype-oss-release clean deploy&#x000A;... The artifact with OSX or Windows native library will be deployed ...&#x000A;</code></pre>
          </li>
          <li><p>Make sure both the Linux, Mac OS X, and Windows artifacts have been deployed into the same staging repositories.  If they are deployed into two or three different staging repositories, drop them all and figure out what was the problem.</p></li>
          <li>If all three JARs (e.g. <code>netty-tcnative-1.1.30.Fork1-linux-x86_64.jar</code>, <code>netty-tcnative-1.1.30.Fork1-osx-x86_64.jar</code>, and <code>netty-tcnative-1.1.30-Fork1-windows-x86_64.jar</code>) exist in the same staging repository, close and release the staging repository.</li>
          </ol>
              </div>
          
            </div></div>
          <div class="toc-container col-md-3 hidden-xs hidden-sm hidden-print" role="complementary">
          <div class="toc well">
          <ul class="nav nav-list nav-stacked">
          <li class="nav-header">Table of Contents
          </li><li>
          <ul class="nav nav-list nav-stacked"><li><a href="#wiki-h3-0" title="Pages 20">Pages 20</a>
          </li></ul></li><li><a href="#wiki-h2-1" title="Before getting started">Before getting started</a>
          </li><li><a href="#wiki-h2-2" title="Standard Maven release procedure">Standard Maven release procedure</a>
          </li><li><a href="#wiki-h2-3" title="Netty 3">Netty 3</a>
          </li><li><a href="#wiki-h2-4" title="Netty 4 and beyond">Netty 4 and beyond</a>
          </li><li><a href="#wiki-h2-5" title="Netty/TomcatNative">Netty/TomcatNative</a>
          </li></ul>
          </div>
          </div>
          </div>
          <div class="row">
            <div class="col-md-9">
              <div class="text-right">
                <small>Last retrieved on 01-Jul-2014</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <hr>
      <footer id="footer">
        <p>
          Copyright &copy; 2014
          <a href="../index.html">The Netty project</a>
        </p>
      </footer>
    </div>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../lib/common.footer.js" type="text/javascript"></script>
  
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker('UA-95307-5');
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
